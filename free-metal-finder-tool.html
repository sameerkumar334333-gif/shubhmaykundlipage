<!DOCTYPE html>
<html lang="hi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="assets/images/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="icon" href="assets/images/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="apple-touch-icon" href="assets/images/apple-touch-icon.png" sizes="180x180">
  <link rel="preconnect" href="https://yhxbwlhfjznajnnlduwt.supabase.co" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <title>Find Your Metal | ShubhMay – Personalized Kundli</title>
  <meta name="description"
    content="Kya aap sahi dhatu pehen rahe ho? Apni rashi ke hisaab se right ear metal jaanen. Janam kundli se exact report – ₹499.">
  <script>window.dataLayer = window.dataLayer || [];</script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script>
    (function () {
      var _sid = sessionStorage.getItem('shubhmay_sid');
      if (!_sid) {
        _sid = 's_' + Date.now() + '_' + Math.random().toString(36).slice(2, 11);
        sessionStorage.setItem('shubhmay_sid', _sid);
        sessionStorage.setItem('shubhmay_session_start_ts', String(Date.now()));
      }
      window._shubhmaySid = _sid;
      var params = new URLSearchParams(window.location.search);
      ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term'].forEach(function (k) {
        var v = params.get(k);
        if (v && !sessionStorage.getItem('shubhmay_' + k)) sessionStorage.setItem('shubhmay_' + k, v);
      });
      function getAttribution() {
        var o = {};
        var st = sessionStorage.getItem('shubhmay_session_start_ts');
        if (st) o.session_start_ts = parseInt(st, 10);
        ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term'].forEach(function (k) {
          var v = sessionStorage.getItem('shubhmay_' + k);
          if (v) o[k] = v;
        });
        return o;
      }
      window._shubhmayQueue = [];
      try {
        window._shubhmaySupabase = window.supabase ? window.supabase.createClient('https://yhxbwlhfjznajnnlduwt.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloeGJ3bGhmanpuYWpubmxkdXd0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3MDc0NjYsImV4cCI6MjA4NzI4MzQ2Nn0.IVZ9AjLF5FgMG4_W1vhGNUX-JSpblj2nhtgkkJn7-MY') : null;
      } catch (e) { window._shubhmaySupabase = null; }
      window._shubhmayTrack = function (et, pl) {
        var payload = Object.assign({}, getAttribution(), pl || {});
        var ev = { session_id: _sid, page_url: location.href, referrer: document.referrer || null, event_type: et, payload: payload, user_agent: navigator.userAgent, language: navigator.language };
        if (window._shubhmaySupabase) {
          try { window._shubhmaySupabase.from('analytics_events').insert([ev]).then(function () { }, function (err) { console.warn('Track err:', err); }); } catch (e) { window._shubhmayQueue.push(ev); }
        } else { window._shubhmayQueue.push(ev); }
      };
      if (window._shubhmaySupabase) window._shubhmayTrack('page_view', { page: 'metal_finder', funnel: 'metal_finder' });
    })();
  </script>
  <script>
    window.addEventListener('load', function () {
      (function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-MGBML6GZ');
    });
  </script>
  <style>
    :root {
      --saffron: #d97706;
      --saffron-soft: #f59e0b;
      --gold: #b45309;
      --gold-bright: #fbbf24;
      --gold-dark: #92400e;
      --cream: #fefce8;
      --cream-dark: #fef9c3;
      --white: #ffffff;
      --text-dark: #1c1917;
      --text-muted: #57534e;
      --shadow-sm: 0 2px 12px rgba(180, 83, 9, 0.12);
      --shadow-md: 0 12px 32px rgba(180, 83, 9, 0.15);
      --shadow-gold: 0 0 24px rgba(251, 191, 36, 0.4);
      --radius: 14px;
      --radius-lg: 18px;
      --transition: 0.25s ease;
      --green: #22c55e;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: var(--text-dark);
      background: linear-gradient(160deg, var(--cream) 0%, var(--cream-dark) 50%, #fde68a 100%);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background: linear-gradient(135deg, var(--gold-dark) 0%, var(--gold) 50%, var(--saffron) 100%);
      box-shadow: 0 4px 20px rgba(180, 83, 9, 0.3);
      z-index: 200;
    }

    .navbar-logo {
      height: 32px;
      width: auto;
      max-width: 100px;
      object-fit: contain;
    }

    .navbar-label {
      font-size: 1rem;
      font-weight: 600;
      color: white;
      letter-spacing: 0.02em;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    .lang-select {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      gap: 4px;
    }

    .lang-btn {
      padding: 6px 10px;
      font-size: 0.8rem;
      font-weight: 600;
      border: 1px solid rgba(255, 255, 255, 0.5);
      background: transparent;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s;
    }

    .lang-btn:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .lang-btn.active {
      background: rgba(255, 255, 255, 0.3);
      border-color: white;
    }

    .wrapper {
      max-width: 480px;
      margin: 0 auto;
      padding: 76px 20px 120px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .step-panel {
      display: none;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.25s ease, transform 0.25s ease;
    }

    .step-panel.visible {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      opacity: 1;
      transform: translateY(0);
      animation: fadeInUp 0.35s ease forwards;
    }

    .step-panel.visible.initial {
      animation: none;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(16px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 28px 24px;
      box-shadow: var(--shadow-md);
      margin-bottom: 20px;
      width: 100%;
      max-width: 420px;
      border: 1px solid rgba(180, 83, 9, 0.15);
      animation: cardReveal 0.4s ease;
    }

    @keyframes cardReveal {
      from {
        opacity: 0;
        transform: scale(0.96);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .headline {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-dark);
      line-height: 1.3;
      margin-bottom: 12px;
    }

    .sub {
      font-size: 1rem;
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .trust-line {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 16px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 14px 24px;
      font-size: 1rem;
      font-weight: 600;
      color: #78350f;
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
      background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 50%, #fcd34d 100%);
      background-size: 200% 200%;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: transform var(--transition), box-shadow var(--transition);
      -webkit-tap-highlight-color: transparent;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      animation: btnShine 2.5s ease-in-out infinite;
    }

    @keyframes btnShine {
      0% {
        left: -100%;
      }

      50%,
      100% {
        left: 100%;
      }
    }

    .btn:active {
      transform: scale(0.98);
    }

    .btn:focus-visible {
      outline: 2px solid var(--gold-bright);
      outline-offset: 2px;
    }

    .btn-secondary {
      background: transparent;
      color: var(--text-muted);
      border: 1px solid rgba(42, 37, 34, 0.2);
      margin-top: 12px;
    }

    .btn-secondary {
      box-shadow: none;
    }

    .btn-secondary::before {
      display: none;
    }

    .btn-secondary:hover {
      background: rgba(42, 37, 34, 0.06);
    }

    .btn-soft {
      background: linear-gradient(135deg, var(--gold) 0%, var(--saffron-soft) 100%);
      color: #fff;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);
    }

    .benefits-intro {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin: -8px 0 20px;
      line-height: 1.5;
    }

    .rashi-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    @media (min-width: 500px) {
      .rashi-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .rashi-card {
      background: var(--white);
      border: 2px solid rgba(42, 37, 34, 0.08);
      border-radius: var(--radius);
      padding: 18px 14px;
      text-align: center;
      cursor: pointer;
      transition: border-color var(--transition), box-shadow var(--transition), transform var(--transition);
      -webkit-tap-highlight-color: transparent;
    }

    .rashi-card:hover,
    .rashi-card:focus-visible {
      border-color: var(--saffron);
      box-shadow: var(--shadow-sm);
    }

    .rashi-card:active {
      transform: scale(0.98);
    }

    .rashi-card {
      animation: rashiIn 0.4s ease backwards;
    }

    .rashi-card:nth-child(1) {
      animation-delay: 0.02s;
    }

    .rashi-card:nth-child(2) {
      animation-delay: 0.05s;
    }

    .rashi-card:nth-child(3) {
      animation-delay: 0.08s;
    }

    .rashi-card:nth-child(4) {
      animation-delay: 0.11s;
    }

    .rashi-card:nth-child(5) {
      animation-delay: 0.14s;
    }

    .rashi-card:nth-child(6) {
      animation-delay: 0.17s;
    }

    .rashi-card:nth-child(7) {
      animation-delay: 0.2s;
    }

    .rashi-card:nth-child(8) {
      animation-delay: 0.23s;
    }

    .rashi-card:nth-child(9) {
      animation-delay: 0.26s;
    }

    .rashi-card:nth-child(10) {
      animation-delay: 0.29s;
    }

    .rashi-card:nth-child(11) {
      animation-delay: 0.32s;
    }

    .rashi-card:nth-child(12) {
      animation-delay: 0.35s;
    }

    @keyframes rashiIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .rashi-icon {
      width: 40px;
      height: 40px;
      margin: 0 auto 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .rashi-icon svg {
      width: 28px;
      height: 28px;
      stroke: var(--gold-dark);
      fill: none;
      stroke-width: 1.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .rashi-icon-img {
      width: 40px;
      height: 40px;
      object-fit: contain;
      display: block;
      margin: 0 auto 10px;
    }

    .rashi-name {
      font-weight: 600;
      font-size: 0.95rem;
      color: var(--text-dark);
    }

    .result-card {
      text-align: center;
      padding: 32px 24px;
      position: relative;
    }

    .result-rashi {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--gold-dark);
      margin-bottom: 8px;
      opacity: 0;
    }

    .result-card.result-animate .result-rashi {
      animation: resultReveal 0.5s ease 0.1s forwards;
    }

    .result-metal {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--gold-dark) 0%, var(--saffron) 50%, var(--gold-bright) 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      opacity: 0;
      letter-spacing: 0.02em;
    }

    .result-card.result-animate .result-metal {
      animation: metalReveal 0.8s ease 0.3s forwards;
    }

    .result-metal-wrap {
      position: relative;
      display: inline-block;
    }

    .result-card.result-animate .result-metal-wrap::after {
      animation: metalGlow 1.2s ease 0.6s forwards;
    }

    .result-metal-wrap::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%) scaleX(0);
      width: 120%;
      height: 4px;
      background: linear-gradient(90deg, transparent, var(--gold-bright), transparent);
      border-radius: 2px;
    }

    @keyframes resultReveal {
      from {
        opacity: 0;
        transform: translateY(12px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes metalReveal {
      from {
        opacity: 0;
        transform: scale(0.8);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes metalGlow {
      from {
        transform: translateX(-50%) scaleX(0);
        opacity: 0;
      }

      to {
        transform: translateX(-50%) scaleX(1);
        opacity: 1;
      }
    }

    .important-note {
      background: #fff8e6;
      border-left: 4px solid var(--gold);
      padding: 14px 16px;
      margin: 20px 0;
      font-size: 0.9rem;
      color: var(--text-dark);
      border-radius: 0 var(--radius) var(--radius) 0;
    }

    .step3-note {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin: 20px 0 12px;
    }

    .step3-gap {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 20px;
    }

    .step3-reassure {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 12px;
    }

    .step3-upsell {
      background: linear-gradient(180deg, var(--white) 0%, #fffef9 100%);
      border: 2px solid rgba(180, 83, 9, 0.2);
      border-radius: var(--radius-lg);
      padding: 32px 24px;
      margin: 0 -4px;
      box-shadow: 0 8px 32px rgba(180, 83, 9, 0.12);
    }

    .step3-result-box {
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.12) 0%, rgba(245, 158, 11, 0.08) 100%);
      border-radius: var(--radius);
      padding: 24px 20px;
      margin: 20px 0;
      border: 1px solid rgba(180, 83, 9, 0.2);
    }

    .step3-note-box {
      background: #fffbf0;
      border-radius: var(--radius);
      padding: 14px 16px;
      border-left: 4px solid var(--saffron);
      margin: 20px 0 12px;
    }

    .step3-cta-block,
    .result-cta-block {
      background: rgba(255, 255, 255, 0.8);
      border-radius: var(--radius);
      padding: 24px;
      margin-top: 24px;
      border: 1px solid rgba(180, 83, 9, 0.15);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .result-experience {
      width: 100%;
      max-width: 420px;
    }

    .result-sec {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 24px 20px;
      margin-bottom: 16px;
      border: 1px solid rgba(180, 83, 9, 0.15);
      box-shadow: var(--shadow-sm);
      opacity: 0;
      animation: resultFadeIn 0.5s ease forwards;
    }

    .result-sec-1 {
      animation-delay: 0.05s;
      background: linear-gradient(145deg, #fffbeb 0%, rgba(255, 251, 235, 0.6) 50%, #fffef5 100%);
      border-left: 4px solid var(--saffron);
      border-color: rgba(180, 83, 9, 0.22);
      box-shadow: 0 8px 32px rgba(180, 83, 9, 0.12);
      padding: 20px 18px;
    }

    .result-rashi-label {
      display: inline-block;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--saffron);
      margin-bottom: 6px;
    }

    .result-identity-hook {
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 8px;
      line-height: 1.35;
      letter-spacing: -0.01em;
    }

    .result-subtext {
      font-size: 0.88rem;
      color: var(--text-muted);
      margin-bottom: 14px;
      font-style: italic;
      position: relative;
      padding-left: 14px;
      border-left: 2px solid rgba(180, 83, 9, 0.25);
    }

    .result-traits {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 0;
    }

    .result-traits li {
      padding: 6px 12px;
      position: relative;
      font-size: 0.82rem;
      font-weight: 600;
      color: var(--text-dark);
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(180, 83, 9, 0.18);
      border-radius: 999px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
    }

    .result-traits li::before {
      content: none;
    }

    .result-sec-2 {
      animation-delay: 0.15s;
    }

    .result-sec-3 {
      animation-delay: 0.25s;
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 40%, #fee2e2 100%);
      border-color: rgba(220, 38, 38, 0.7);
      border-left: 4px solid #b91c1c;
      box-shadow: 0 18px 55px rgba(185, 28, 28, 0.35);
      position: relative;
      overflow: hidden;
      animation-name: resultFadeIn, urgentShake;
      animation-duration: 0.5s, 1.8s;
      animation-timing-function: ease, cubic-bezier(0.36, 0.07, 0.19, 0.97);
      animation-iteration-count: 1, infinite;
      animation-delay: 0s, 0.8s;
    }

    .result-sec-4 {
      animation-delay: 0.35s;
    }

    .result-sec-5 {
      animation-delay: 0.45s;
    }

    .result-warning-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 16px;
      border-radius: 999px;
      background: #dc2626;
      color: #ffffff;
      font-size: 0.8rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      border: none;
      box-shadow: none;
      position: relative;
      margin-bottom: 10px;
      animation: badgePulse 1.4s ease-in-out infinite;
    }

    .result-dosh-main {
      margin-top: 6px;
      font-size: 0.95rem;
      line-height: 1.7;
      color: #7f1d1d;
      font-weight: 600;
    }

    .result-dosh-main strong {
      color: #b91c1c;
    }

    @keyframes badgePulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(248, 113, 113, 0.4);
      }
      50% {
        transform: scale(1.04);
        box-shadow: 0 0 0 4px rgba(248, 113, 113, 0.18);
      }
      100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(248, 113, 113, 0.08);
      }
    }

    @keyframes urgentShake {
      0%,
      100% {
        transform: translateX(0);
      }
      10% {
        transform: translateX(-1px);
      }
      20% {
        transform: translateX(2px);
      }
      30% {
        transform: translateX(-2px);
      }
      40% {
        transform: translateX(1px);
      }
      50% {
        transform: translateX(0);
      }
    }

    @keyframes resultFadeIn {
      to {
        opacity: 1;
      }
    }

    .result-identity-hook {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 8px;
      line-height: 1.3;
    }

    .result-subtext {
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .result-traits {
      list-style: none;
    }

    .result-traits li {
      padding: 6px 0 6px 24px;
      position: relative;
      font-size: 0.9rem;
      color: var(--text-dark);
    }

    .result-traits li::before {
      content: '•';
      position: absolute;
      left: 0;
      color: var(--saffron);
      font-weight: 700;
    }

    .result-metal-glow {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--gold-dark);
      padding: 10px 14px;
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.16) 0%, rgba(245, 158, 11, 0.1) 100%);
      border-radius: var(--radius);
      text-align: center;
      border: 1px solid rgba(180, 83, 9, 0.16);
      animation: none;
    }

    @keyframes metalGlow {

      0%,
      100% {
        box-shadow: 0 0 12px rgba(251, 191, 36, 0.3);
      }

      50% {
        box-shadow: 0 0 24px rgba(251, 191, 36, 0.5);
      }
    }

    .result-metal-note {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 12px;
      text-align: center;
    }

    .accordion {
      margin: 0;
    }

    .accordion-trigger {
      width: 100%;
      padding: 14px 16px;
      background: rgba(180, 83, 9, 0.06);
      border: 1px solid rgba(180, 83, 9, 0.15);
      border-radius: var(--radius);
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-dark);
      text-align: left;
      cursor: pointer;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .accordion-trigger::after {
      content: '+';
      font-size: 1.2rem;
      color: var(--saffron);
      transition: transform 0.25s ease;
    }

    .accordion-trigger[aria-expanded="true"]::after {
      transform: rotate(45deg);
    }

    .accordion-trigger:hover {
      background: rgba(180, 83, 9, 0.1);
    }

    .accordion-panel {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .accordion-panel.open {
      max-height: 150px;
    }

    .accordion-text {
      padding: 12px 16px 16px;
      font-size: 0.9rem;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .result-curiosity-head {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .result-curiosity-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .progress-wrap {
      margin-top: 8px;
    }

    .progress-bar {
      height: 8px;
      background: rgba(180, 83, 9, 0.15);
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--saffron), var(--gold-bright));
      border-radius: 4px;
      transition: width 0.4s ease;
    }

    .progress-label {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 8px;
    }

    .result-cta-head {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .result-benefits {
      list-style: none;
      margin-bottom: 20px;
    }

    .result-benefits li {
      padding: 8px 0 8px 24px;
      position: relative;
      font-size: 0.9rem;
      color: var(--text-dark);
    }

    .result-benefits li::before {
      content: '✓';
      position: absolute;
      left: 0;
      color: var(--green);
      font-weight: 700;
    }

    .result-cta-header {
      margin-bottom: 14px;
    }

    .result-cta-grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 18px;
    }

    .result-cta-pill {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(254, 243, 199, 0.9);
      border: 1px solid rgba(180, 83, 9, 0.18);
      font-size: 0.88rem;
      color: var(--text-dark);
    }

    .result-cta-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: linear-gradient(135deg, #f59e0b, #fbbf24);
      box-shadow: 0 0 6px rgba(251, 191, 36, 0.7);
      flex-shrink: 0;
    }

    .result-cta-block-strong {
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.16), rgba(245, 158, 11, 0.12));
      border-color: rgba(180, 83, 9, 0.3);
    }

    .result-urgency {
      font-size: 0.78rem;
      color: #b91c1c;
      margin-top: 8px;
      text-align: center;
    }

    .result-reassure {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 12px;
    }

    .result-back {
      margin-top: 16px;
    }

    .btn-whatsapp {
      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%) !important;
      color: #fff !important;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-whatsapp::before {
      display: none;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin: 24px 0;
    }

    .comparison-card {
      background: var(--white);
      border: 1px solid rgba(42, 37, 34, 0.1);
      border-radius: var(--radius);
      padding: 20px;
    }

    .comparison-card.general {
      border-color: rgba(107, 99, 94, 0.2);
    }

    .comparison-card.personalized {
      border-color: rgba(180, 83, 9, 0.35);
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, rgba(245, 158, 11, 0.12) 100%);
      box-shadow: 0 2px 12px rgba(180, 83, 9, 0.1);
    }

    .comparison-title {
      font-weight: 600;
      margin-bottom: 12px;
      font-size: 0.95rem;
    }

    .comparison-card ul {
      list-style: none;
      font-size: 0.9rem;
      color: var(--text-muted);
      line-height: 1.7;
    }

    .comparison-card li {
      padding-left: 20px;
      position: relative;
    }

    .comparison-card li::before {
      content: '•';
      position: absolute;
      left: 0;
      color: var(--saffron);
    }

    .benefit-list {
      list-style: none;
      text-align: left;
      margin: 20px 0;
    }

    .benefit-list li {
      padding: 10px 0 10px 32px;
      position: relative;
      font-size: 0.95rem;
      color: var(--text-dark);
    }

    .benefit-list li::before {
      content: '';
      position: absolute;
      left: 0;
      top: 14px;
      width: 8px;
      height: 8px;
      background: var(--saffron);
      border-radius: 50%;
    }

    .price-block {
      margin: 24px 0;
      text-align: center;
    }

    .price-old {
      text-decoration: line-through;
      color: var(--text-muted);
      font-size: 1.1rem;
      margin-right: 12px;
    }

    .price-now {
      font-size: 2rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--gold-dark) 0%, var(--saffron) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 1px 2px rgba(180, 83, 9, 0.2));
    }

    .reassurance {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 16px;
    }

    .step5-teaser {
      margin-top: 12px;
      font-weight: 500;
      color: var(--text-dark);
    }

    .loader-dot {
      width: 12px;
      height: 12px;
      background: var(--saffron);
      border-radius: 50%;
      animation: pulse 0.8s ease-in-out infinite;
    }

    .loader-dot:nth-child(2) {
      animation-delay: 0.15s;
    }

    .loader-dot:nth-child(3) {
      animation-delay: 0.3s;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 0.4;
        transform: scale(0.9);
      }

      50% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .loader-wrap {
      display: flex;
      justify-content: center;
      gap: 8px;
      padding: 60px 0;
    }

    .success-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, var(--saffron) 0%, var(--gold) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .contact-block {
      margin-top: 24px;
      font-size: 1rem;
    }

    .contact-block a {
      color: var(--saffron);
      text-decoration: none;
      font-weight: 500;
    }

    .contact-block a:hover {
      text-decoration: underline;
    }

    .sticky-cta-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, #fff 100%);
      padding: 12px 20px;
      box-shadow: 0 -4px 24px rgba(180, 83, 9, 0.15);
      z-index: 100;
      display: none;
      transition: transform var(--transition);
    }

    .sticky-cta-bar.visible {
      display: block;
    }

    .sticky-cta-bar .btn {
      margin: 0;
      max-width: 100%;
    }

    /* Interstitial astrology loader */
    .kundli-loader-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(45, 8, 14, 0.96), rgba(10, 10, 10, 0.98));
      display: none;
      z-index: 9999;
      align-items: center;
      justify-content: center;
      color: #fef3c7;
      text-align: center;
      padding: 24px;
    }

    .kundli-loader-overlay.visible {
      display: flex;
    }

    .kundli-loader-inner {
      max-width: 360px;
    }

    .kundli-loader-wheel {
      width: 80px;
      height: 80px;
      border-radius: 999px;
      border: 3px solid rgba(252, 211, 77, 0.2);
      border-top-color: #facc15;
      border-right-color: #f97316;
      margin: 0 auto 16px;
      animation: spin 1.4s linear infinite;
      box-shadow: 0 0 20px rgba(250, 204, 21, 0.45);
    }

    .kundli-loader-title {
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .kundli-loader-line {
      font-size: 0.92rem;
      color: #fde68a;
      min-height: 44px;
      line-height: 1.5;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .result-popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      z-index: 300;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: popupFade 0.3s ease;
    }

    .result-popup-overlay.visible {
      display: flex;
    }

    @keyframes popupFade {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .result-popup {
      position: relative;
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 28px 24px;
      max-width: 380px;
      width: 100%;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
      text-align: center;
      animation: popupSlide 0.35s ease;
    }

    @keyframes popupSlide {
      from {
        transform: scale(0.9);
        opacity: 0;
      }

      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .result-popup p {
      margin-bottom: 20px;
      color: var(--text-dark);
      font-size: 1rem;
    }

    .result-popup-close {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 32px;
      height: 32px;
      border: none;
      background: rgba(0, 0, 0, 0.08);
      color: var(--text-muted);
      font-size: 1.5rem;
      line-height: 1;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    .result-popup-close:hover {
      background: rgba(0, 0, 0, 0.12);
      color: var(--text-dark);
    }

    .page-benefits {
      margin-top: 48px;
      padding: 32px 24px 24px;
      border-top: 1px solid rgba(180, 83, 9, 0.12);
      text-align: center;
    }

    .page-benefits-title {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .page-benefits-list {
      list-style: none;
      font-size: 0.85rem;
      color: var(--text-muted);
      line-height: 2.2;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0 24px;
    }
  </style>
</head>

<body>
  <nav class="navbar" aria-label="Brand">
    <img src="assets/shubhmay-logo.png" alt="" class="navbar-logo" loading="lazy" decoding="async"
      onerror="this.style.display='none'">
    <span class="navbar-label" data-i18n="navLabel">Free Metal Finder Tool</span>
    <div class="lang-select">
      <button type="button" class="lang-btn active" data-lang="hi">हिंदी</button>
      <button type="button" class="lang-btn" data-lang="en">English</button>
    </div>
  </nav>
  <main class="wrapper">
    <!-- Step 0: Loader (hidden by default, LCP = Step 1) -->
    <section class="step-panel" data-step="0" aria-label="Loading" aria-hidden="true">
      <div class="card">
        <div class="loader-wrap" id="loaderWrap">
          <span class="loader-dot"></span>
          <span class="loader-dot"></span>
          <span class="loader-dot"></span>
        </div>
      </div>
    </section>

    <!-- Step 1: Hook – visible immediately, no animation for fast LCP -->
    <section class="step-panel visible initial" data-step="1" aria-labelledby="step1-title" aria-hidden="false">
      <div class="card">
        <h1 class="headline" id="step1-title" data-i18n="step1Title">Apna sahi kundal metal jaanen</h1>
        <p class="sub" data-i18n="step1Sub">Right ear mein Gold, Silver ya Copper—rashi ke hisaab se sahi dhatu pehenne
          se energy balance hoti hai. Ye quick guide se aap apni rashi ka metal jaan sakte ho.</p>
        <p class="benefits-intro" data-i18n="step1Benefits">Kundal metal ke fayde: positive energy, mental clarity, aur
          grah alignment.</p>
        <button type="button" class="btn btn-soft" id="cta-start" data-cta="hook" data-i18n="step1Cta">Start
          Now</button>
        <p class="trust-line" data-i18n="step1Trust">1 minute • Free • No signup</p>
      </div>
    </section>

    <!-- Step 2: Select Rashi -->
    <section class="step-panel" data-step="2" aria-labelledby="step2-title">
      <div class="card">
        <h2 class="headline" id="step2-title" data-i18n="step2Title">Apni Rashi Select Karo</h2>
        <p class="sub" style="margin-bottom: 16px;" data-i18n="step2Sub">Neeche se apni janam rashi choose karein—aapko
          right ear metal ka suggestion milega.</p>
        <div class="rashi-grid" id="rashiGrid" role="group" aria-label="Rashi selection">
          <!-- Populated by JS -->
        </div>
      </div>
    </section>

    <!-- Step 3: Rashi Result Experience – high-converting -->
    <section class="step-panel" data-step="3" aria-labelledby="result-identity-hook">
      <div class="result-experience">
        <!-- Section 1: Personal Identity Hook -->
        <div class="result-sec result-sec-1">
          <span class="result-rashi-label">Aapki rashi</span>
          <h1 class="result-identity-hook" id="result-identity-hook"></h1>
          <p class="result-subtext">Is rashi ke log alag soch rakhte hain…</p>
          <ul class="result-traits" id="resultTraits"></ul>
        </div>
        <!-- Section 2: Rashi-based Metal Result (deliberately incomplete) -->
        <div class="result-sec result-sec-2">
          <div class="result-metal-glow" id="resultMetalGlow"></div>
          <p class="result-metal-note">Ye sirf rashi-based recommendation hai… lekin yahi final answer nahi hota.</p>
        </div>
        <!-- Section 3: Dosh education – sharp + short -->
        <div class="result-sec result-sec-3">
          <div class="result-warning-badge">Important: sirf rashi se decision mat lo</div>
          <p class="result-dosh-main">
            Agar aapki janam kundli me dosh ya weak grah hain to ye rashi‑based metal kaam nahi kar sakta —
            kabhi‑kabhi ulta effect bhi de sakta hai.
          </p>
        </div>
        <!-- Section 4: Direct CTA to kundli -->
        <div class="result-sec result-sec-5">
          <div class="result-cta-header">
            <h2 class="result-cta-head">Turant apni janam kundli check karein</h2>
          </div>
          <div class="result-cta-block result-cta-block-strong">
            <button type="button" class="btn" id="cta-check-kundli" data-cta="result">
              Check Your Janam Kundli
            </button>
            <button type="button" class="btn btn-whatsapp" id="cta-whatsapp-result" data-i18n="step3Whatsapp">Send This
              Result on WhatsApp</button>
          </div>
        </div>
        <button type="button" class="btn btn-secondary result-back" id="cta-back-rashi" data-i18n="step3Back">Back /
          Change Rashi</button>
      </div>
    </section>

    <!-- Step 4: Education – curiosity, no price -->
    <section class="step-panel" data-step="4" aria-labelledby="step4-title">
      <div class="card">
        <h2 class="headline" id="step4-title" data-i18n="step4Title">Aapka janam samay, nakshatra, grah—sab combine
          karke hi exact answer aata hai.</h2>
        <p class="sub" data-i18n="step4Sub">Personalized kundli report mein aapko pata chalega: sahi dhatu ke sath
          career, relationship, aur coming years ka roadmap.</p>
        <div class="comparison-grid">
          <div class="comparison-card general">
            <div class="comparison-title" data-i18n="step4GenTitle">Abhi jo mila (General)</div>
            <ul>
              <li data-i18n="step4Gen1">Sirf rashi pe based</li>
              <li data-i18n="step4Gen2">Approx idea</li>
              <li data-i18n="step4Gen3">Sabke liye same</li>
            </ul>
          </div>
          <div class="comparison-card personalized">
            <div class="comparison-title" data-i18n="step4PerTitle">Personalized Report (Aapke liye)</div>
            <ul>
              <li data-i18n="step4Per1">Birth chart + nakshatra</li>
              <li data-i18n="step4Per2">Exact metal + timing</li>
              <li data-i18n="step4Per3">Career, love, money insights</li>
            </ul>
          </div>
        </div>
        <button type="button" class="btn" id="cta-proceed" data-cta="education" data-i18n="step4Cta">Show My
          Report</button>
      </div>
    </section>

    <!-- Step 5: Offer – curiosity, no price upfront -->
    <section class="step-panel" data-step="5" aria-labelledby="step5-title">
      <div class="card">
        <h2 class="headline" id="step5-title" data-i18n="step5Title">Aapki janam kundli se prepared—sirf aapke liye.
        </h2>
        <p class="sub" data-i18n="step5Sub">Expert analysis. 15–20 page report. WhatsApp + Email dono par—24–48 hours.
        </p>
        <p class="sub step5-teaser" data-i18n="step5Teaser">Aapko pata chalega: exactly kaun sa metal, kab pehenna hai,
          aur coming years mein kya expect karna hai.</p>
        <ul class="benefit-list">
          <li data-i18n="step5B1">Right ear metal (exact, not approx)</li>
          <li data-i18n="step5B2">Grah strengths—kaun aapke saath hai</li>
          <li data-i18n="step5B3">Career & money—best timing kya hai</li>
          <li data-i18n="step5B4">Relationship—compatibility & timing</li>
          <li data-i18n="step5B5">10-year roadmap—major shifts</li>
        </ul>
        <button type="button" class="btn" id="cta-pay" data-cta="offer" data-i18n="step5Cta">Generate My Kundli</button>
        <p class="reassurance"><span data-i18n="step5Reassure">Secure • No spam • Support:</span> <a
            href="mailto:shubh@shubhmay.com">shubh@shubhmay.com</a></p>
      </div>
    </section>

    <!-- Step 6: Success -->
    <section class="step-panel" data-step="6" aria-labelledby="step6-title">
      <div class="card">
        <div class="success-icon" aria-hidden="true">✓</div>
        <h2 class="headline" id="step6-title" data-i18n="step6Title">Thank you!</h2>
        <p class="sub" data-i18n="step6Sub">We will contact you on WhatsApp for birth details.</p>
        <div class="contact-block">
          <p>Support: <a href="mailto:shubh@shubhmay.com">shubh@shubhmay.com</a></p>
          <p>WhatsApp: <a href="https://wa.me/918002560943">8002560943</a></p>
          <p class="trust-line" data-i18n="step6Spam">Check spam/promotions folder</p>
        </div>
      </div>
    </section>
    <footer class="page-benefits">
      <div class="page-benefits-title" data-i18n="footerTitle">Kundal Metal Benefits</div>
      <ul class="page-benefits-list">
        <li data-i18n="footer1">Energy balance</li>
        <li data-i18n="footer2">Mental clarity</li>
        <li data-i18n="footer3">Grah alignment</li>
        <li data-i18n="footer4">Right ear specific</li>
      </ul>
    </footer>
  </main>

  <!-- Interstitial kundli checking loader -->
  <div class="kundli-loader-overlay" id="kundliLoader" aria-hidden="true">
    <div class="kundli-loader-inner">
      <div class="kundli-loader-wheel"></div>
      <div class="kundli-loader-title">Checking kundli…</div>
      <div class="kundli-loader-line" id="kundliLoaderLine">Graho ki position analyse ho rahi hai…</div>
    </div>
  </div>

  <!-- Sticky CTA (Steps 3–5) -->
  <div class="sticky-cta-bar" id="stickyCta" aria-hidden="true">
    <button type="button" class="btn" id="cta-sticky" data-i18n="stickyCta">Check Your Janam Kundli</button>
  </div>

  <!-- Phone capture modal for WhatsApp -->
  <div class="result-popup-overlay" id="whatsappPhoneModal" aria-hidden="true">
    <div class="result-popup">
      <button type="button" class="result-popup-close" id="whatsappModalClose" aria-label="Close">&times;</button>
      <h3 style="font-size:1.1rem;margin-bottom:8px;">Apna WhatsApp number dijiye</h3>
      <p style="font-size:0.9rem;color:var(--text-muted);margin-bottom:16px;">Result WhatsApp par share karne ke liye
        number chahiye.</p>
      <input type="tel" id="whatsappPhoneInput" placeholder="10 digit number (e.g. 9876543210)" maxlength="10"
        pattern="[0-9]{10}"
        style="width:100%;padding:12px 16px;border:1px solid rgba(180,83,9,0.3);border-radius:var(--radius);font-size:1rem;margin-bottom:12px;">
      <p id="whatsappPhoneErr" style="font-size:0.8rem;color:#ef4444;margin-bottom:8px;display:none;"></p>
      <button type="button" class="btn btn-whatsapp" id="whatsappModalSubmit">Send on WhatsApp</button>
    </div>
  </div>

  <script>
    (function () {
      var RASHI_TRAITS = {
        mesh: ['Bold nature', 'Leadership quality', 'Energy high'],
        vrishabh: ['Stable mindset', 'Artistic sense', 'Patience strong'],
        mithun: ['Tez dimaag', 'Communication strong', 'Dual nature'],
        kark: ['Emotional depth', 'Intuition strong', 'Family-oriented'],
        singh: ['Confident', 'Creative', 'Natural leader'],
        kanya: ['Detail-oriented', 'Analytical', 'Practical'],
        tula: ['Balanced thinking', 'Diplomatic', 'Aesthetic sense'],
        vrishchik: ['Deep focus', 'Transformation', 'Passionate'],
        dhanu: ['Philosophical', 'Optimistic', 'Adventurous'],
        makar: ['Disciplined', 'Ambitious', 'Practical'],
        kumbh: ['Innovative', 'Independent', 'Humanitarian'],
        meen: ['Intuitive', 'Compassionate', 'Creative']
      };
      const RASHI_METAL_MAP = {
        mesh: { metal: 'Gold' },
        vrishabh: { metal: 'Silver' },
        mithun: { metal: 'Copper' },
        kark: { metal: 'Gold' },
        singh: { metal: 'Silver' },
        kanya: { metal: 'Copper' },
        tula: { metal: 'Silver' },
        vrishchik: { metal: 'Silver' },
        dhanu: { metal: 'Gold' },
        makar: { metal: 'Gold' },
        kumbh: { metal: 'Silver' },
        meen: { metal: 'Copper' }
      };

      var RASHI_NAMES = {
        hi: { mesh: 'मेष (Mesh)', vrishabh: 'वृषभ (Vrishabh)', mithun: 'मिथुन (Mithun)', kark: 'कर्क (Kark)', singh: 'सिंह (Singh)', kanya: 'कन्या (Kanya)', tula: 'तुला (Tula)', vrishchik: 'वृश्चिक (Vrishchik)', dhanu: 'धनु (Dhanu)', makar: 'मकर (Makar)', kumbh: 'कुंभ (Kumbh)', meen: 'मीन (Meen)' },
        en: { mesh: 'Aries', vrishabh: 'Taurus', mithun: 'Gemini', kark: 'Cancer', singh: 'Leo', kanya: 'Virgo', tula: 'Libra', vrishchik: 'Scorpio', dhanu: 'Sagittarius', makar: 'Capricorn', kumbh: 'Aquarius', meen: 'Pisces' }
      };

      var METAL_NAMES = {
        hi: { Gold: 'सोना (Gold)', Silver: 'चाँदी (Silver)', Copper: 'तांबा (Copper)' },
        en: { Gold: 'Gold', Silver: 'Silver', Copper: 'Copper' }
      };

      var RASHI_IMAGES = {
        mesh: 'assets/images/Zodiac1.webp',
        vrishabh: 'assets/images/Vrisabh.webp',
        mithun: 'assets/images/Gemini.webp',
        kark: 'assets/images/Kark.webp',
        singh: 'assets/images/singh.webp',
        kanya: 'assets/images/Kanya.webp',
        tula: 'assets/images/tula.webp',
        vrishchik: 'assets/images/Vrishchik.webp',
        dhanu: 'assets/images/dhanu.webp',
        makar: 'assets/images/makar.webp',
        kumbh: 'assets/images/kumbh.webp',
        meen: 'assets/images/meen.webp'
      };
      var RASHI_SVGS = {
        vrishabh: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M9 8h6M12 5v6"/></svg>',
        mithun: '<svg viewBox="0 0 24 24"><path d="M8 5v14M16 5v14M8 12h8"/></svg>',
        kark: '<svg viewBox="0 0 24 24"><path d="M8 10c1 1 2 1.5 4 1.5s3-.5 4-1.5M8 14c1-1 2-1.5 4-1.5s3 .5 4 1.5"/></svg>',
        singh: '<svg viewBox="0 0 24 24"><path d="M6 13h3l1.5 5 1.5-5h3"/><circle cx="12" cy="8" r="1.5"/></svg>',
        kanya: '<svg viewBox="0 0 24 24"><path d="M12 6v10M9 10l3-4 3 4M9 14l3 4 3-4"/></svg>',
        tula: '<svg viewBox="0 0 24 24"><path d="M12 5v14M6 11h12M6 13h12"/></svg>',
        vrishchik: '<svg viewBox="0 0 24 24"><path d="M4 12h16M9 8l3 4 3-4M9 16l3-4 3 4"/></svg>',
        dhanu: '<svg viewBox="0 0 24 24"><path d="M5 18l3-6 3 3 3-6M5 21h14"/></svg>',
        makar: '<svg viewBox="0 0 24 24"><path d="M9 18l3-5 3 5M12 6v6"/></svg>',
        kumbh: '<svg viewBox="0 0 24 24"><path d="M7 10c1-1 2.5-1 4 0M7 14c1 1 2.5 1 4 0M12 7v10"/></svg>',
        meen: '<svg viewBox="0 0 24 24"><path d="M8 10a2.5 2.5 0 1 0 0 5M16 14a2.5 2.5 0 1 0 0-5M12 11.5v1"/></svg>'
      };

      var COPY = {
        hi: {
          navLabel: 'Free Metal Finder Tool',
          step1Title: 'Apna sahi kundal metal jaanen',
          step1Sub: 'Right ear mein Gold, Silver ya Copper—rashi ke hisaab se sahi dhatu pehenne se energy balance hoti hai. Ye quick guide se aap apni rashi ka metal jaan sakte ho.',
          step1Benefits: 'Kundal metal ke fayde: positive energy, mental clarity, aur grah alignment.',
          step1Cta: 'Start Now',
          step1Trust: '1 minute • Free • No signup',
          step2Title: 'Apni Rashi Select Karo',
          step2Sub: 'Neeche se apni janam rashi choose karein—aapko right ear metal ka suggestion milega.',
          step3Title: 'Aapki Rashi ke hisaab se…',
          step3Guide: 'Rashi Metal Guide (General)',
          step3Note: '⚠ Ye sirf rashi-based guide hai. Final metal janam kundli ke hisaab se change ho sakta hai.',
          step3Gap: 'Sirf 1 minute me apni exact birth-based metal aur poori kundli analysis dekhiye.',
          step3Cta: 'Check My Personalized Kundli',
          step3Whatsapp: 'Send This Result on WhatsApp',
          step3Reassure: 'Report WhatsApp + Email par milegi • 24–48 hours',
          step3Back: 'Back / Change Rashi',
          step4Title: 'Aapka janam samay, nakshatra, grah—sab combine karke hi exact answer aata hai.',
          step4Sub: 'Personalized kundli report mein aapko pata chalega: sahi dhatu ke sath career, relationship, aur coming years ka roadmap.',
          step4GenTitle: 'Abhi jo mila (General)',
          step4Gen1: 'Sirf rashi pe based',
          step4Gen2: 'Approx idea',
          step4Gen3: 'Sabke liye same',
          step4PerTitle: 'Personalized Report (Aapke liye)',
          step4Per1: 'Birth chart + nakshatra',
          step4Per2: 'Exact metal + timing',
          step4Per3: 'Career, love, money insights',
          step4Cta: 'Show My Report',
          step5Title: 'Aapki janam kundli se prepared—sirf aapke liye.',
          step5Sub: 'Expert analysis. 15–20 page report. WhatsApp + Email dono par—24–48 hours.',
          step5Teaser: 'Aapko pata chalega: exactly kaun sa metal, kab pehenna hai, aur coming years mein kya expect karna hai.',
          step5B1: 'Right ear metal (exact, not approx)',
          step5B2: 'Grah strengths—kaun aapke saath hai',
          step5B3: 'Career & money—best timing kya hai',
          step5B4: 'Relationship—compatibility & timing',
          step5B5: '10-year roadmap—major shifts',
          step5Cta: 'Generate My Kundli',
          step5Reassure: 'Secure payment • No spam • Support:',
          step6Title: 'Thank you!',
          step6Sub: 'We will contact you on WhatsApp for birth details.',
          step6Spam: 'Check spam/promotions folder',
          footerTitle: 'Kundal Metal Benefits',
          footer1: 'Energy balance',
          footer2: 'Mental clarity',
          footer3: 'Grah alignment',
          footer4: 'Right ear specific',
          stickyCta: 'Check Your Janam Kundli',
          popupText: 'Apni janam kundli se personalized report pao.',
          popupCta: 'Check My Personalized Kundli'
        },
        en: {
          navLabel: 'Free Metal Finder Tool',
          step1Title: 'Know your right kundal metal',
          step1Sub: 'Gold, Silver or Copper in the right ear—wearing the right metal as per your rashi helps balance energy. This quick guide helps you find your rashi\'s metal.',
          step1Benefits: 'Kundal metal benefits: positive energy, mental clarity, and grah alignment.',
          step1Cta: 'Start Now',
          step1Trust: '1 minute • Free • No signup',
          step2Title: 'Select Your Rashi',
          step2Sub: 'Choose your birth rashi below—you\'ll get a right ear metal suggestion.',
          step3Title: 'According to your rashi…',
          step3Guide: 'Rashi Metal Guide (General)',
          step3Note: '⚠ This is only a rashi-based guide. Final metal can change based on your janam kundli.',
          step3Gap: 'Get your exact birth-based metal and full kundli analysis in just 1 minute.',
          step3Cta: 'Check My Personalized Kundli',
          step3Whatsapp: 'Send This Result on WhatsApp',
          step3Reassure: 'Report on WhatsApp + Email • 24–48 hours',
          step3Back: 'Back / Change Rashi',
          step4Title: 'Exact answer comes when birth time, nakshatra, and planets combine—just for you.',
          step4Sub: 'Your personalized kundli report reveals: the right metal, career timing, relationship insights, and your coming years roadmap.',
          step4GenTitle: 'What you got now (General)',
          step4Gen1: 'Based only on rashi',
          step4Gen2: 'Approx idea',
          step4Gen3: 'Same for everyone',
          step4PerTitle: 'Personalized Report (For you)',
          step4Per1: 'Birth chart + nakshatra',
          step4Per2: 'Exact metal + timing',
          step4Per3: 'Career, love, money insights',
          step4Cta: 'Show My Report',
          step5Title: 'Prepared from your birth chart—only for you.',
          step5Sub: 'Expert analysis. 15–20 page report. Delivered on WhatsApp + Email—24–48 hours.',
          step5Teaser: 'You\'ll discover: exactly which metal, when to wear it, and what to expect in coming years.',
          step5B1: 'Right ear metal (exact, not approx)',
          step5B2: 'Planetary strengths—who supports you',
          step5B3: 'Career & money—best timing',
          step5B4: 'Relationship—compatibility & timing',
          step5B5: '10-year roadmap—major shifts',
          step5Cta: 'Generate My Kundli',
          step5Reassure: 'Secure payment • No spam • Support:',
          step6Title: 'Thank you!',
          step6Sub: 'We will contact you on WhatsApp for birth details.',
          step6Spam: 'Check spam/promotions folder',
          footerTitle: 'Kundal Metal Benefits',
          footer1: 'Energy balance',
          footer2: 'Mental clarity',
          footer3: 'Grah alignment',
          footer4: 'Right ear specific',
          stickyCta: 'Check Your Janam Kundli',
          popupText: 'Get your personalized report from your birth chart.',
          popupCta: 'Check My Personalized Kundli'
        }
      };

      var currentLang = 'hi';

      function getRashiName(key) { return (RASHI_NAMES[currentLang] && RASHI_NAMES[currentLang][key]) || key; }
      function getMetalName(metal) { return (METAL_NAMES[currentLang] && METAL_NAMES[currentLang][metal]) || metal; }

      function setLang(lang) {
        currentLang = lang;
        document.querySelectorAll('.lang-btn').forEach(function (b) {
          b.classList.toggle('active', b.getAttribute('data-lang') === lang);
        });
        document.querySelectorAll('[data-i18n]').forEach(function (el) {
          var key = el.getAttribute('data-i18n');
          if (COPY[lang] && COPY[lang][key]) el.textContent = COPY[lang][key];
        });
        document.querySelectorAll('.rashi-card').forEach(function (card) {
          var key = card.getAttribute('data-rashi');
          var nameEl = card.querySelector('.rashi-name');
          if (nameEl && key && RASHI_NAMES[lang]) nameEl.textContent = RASHI_NAMES[lang][key] || nameEl.textContent;
        });
        if (selectedRashi && RASHI_METAL_MAP[selectedRashi] && currentStep === 3) {
          var r = RASHI_METAL_MAP[selectedRashi];
          var rn = getRashiName(selectedRashi);
          var rm = getMetalName(r.metal);
          var identityEl = document.getElementById('result-identity-hook');
          var metalGlowEl = document.getElementById('resultMetalGlow');
          var accordion1El = document.getElementById('accordion1Text');
          if (identityEl) identityEl.textContent = 'Aap ' + rn + ' se hain';
          if (metalGlowEl) metalGlowEl.textContent = rm;
          if (accordion1El) accordion1El.textContent = 'Har ' + rn + ' rashi wale ke liye metal same nahi hota.';
        }
      }

      document.querySelectorAll('.lang-btn').forEach(function (btn) {
        btn.addEventListener('click', function () {
          setLang(this.getAttribute('data-lang'));
        });
      });

      const STEP_NAMES = ['loader', 'hook', 'rashi_select', 'result', 'education', 'offer', 'success'];
      const CHECKOUT_URL = 'https://superprofile.bio/vp/kundli-checkout';
      const PREVIEW_URL = 'kundli-preview.html';
      let currentStep = 0;
      let selectedRashi = null;

      function emit(event, data) {
        try {
          window.dataLayer = window.dataLayer || [];
          window.dataLayer.push(Object.assign({ event }, data));
          var payload = Object.assign({ page: 'metal_finder' }, data);
          if (window._shubhmayTrack) window._shubhmayTrack(event, payload);
        } catch (e) { }
      }

      function showStep(n) {
        document.querySelectorAll('.step-panel').forEach(function (p) {
          p.classList.remove('visible');
          p.setAttribute('aria-hidden', 'true');
        });
        const panel = document.querySelector('.step-panel[data-step="' + n + '"]');
        if (panel) {
          panel.classList.add('visible');
          panel.setAttribute('aria-hidden', 'false');
        }

        currentStep = n;
        document.getElementById('stickyCta').classList.toggle('visible', n >= 3 && n <= 5);

        emit('step_view', { step_index: n, step_name: STEP_NAMES[n] });

        if (n === 3 && selectedRashi && RASHI_METAL_MAP[selectedRashi]) {
          var r = RASHI_METAL_MAP[selectedRashi];
          var rashiName = getRashiName(selectedRashi);
          var metalName = getMetalName(r.metal);
          var identityEl = document.getElementById('result-identity-hook');
          var traitsEl = document.getElementById('resultTraits');
          var metalGlowEl = document.getElementById('resultMetalGlow');
          var accordion1El = document.getElementById('accordion1Text');
          if (identityEl) identityEl.textContent = 'Aap ' + rashiName + ' se hain';
          if (traitsEl) {
            var traits = RASHI_TRAITS[selectedRashi] || ['Unique', 'Special', 'Individual'];
            traitsEl.innerHTML = traits.map(function (t) { return '<li>' + t + '</li>'; }).join('');
          }
          if (metalGlowEl) metalGlowEl.textContent = metalName;
          if (accordion1El) accordion1El.textContent = 'Har ' + rashiName + ' rashi wale ke liye metal same nahi hota.';
          document.querySelectorAll('.accordion-trigger').forEach(function (t) { t.setAttribute('aria-expanded', 'false'); });
          document.querySelectorAll('.accordion-panel').forEach(function (p) { p.classList.remove('open'); });
        }
      }

      function goCheckout() {
        emit('checkout_start', { step: 'offer', destination_url: CHECKOUT_URL });
        window.location.href = CHECKOUT_URL;
      }
      function goToPreview() {
        emit('cta_click', { cta_location: 'result_preview', destination_url: PREVIEW_URL });
        window.location.href = PREVIEW_URL;
      }

      // Build rashi grid
      var grid = document.getElementById('rashiGrid');
      Object.keys(RASHI_METAL_MAP).forEach(function (key) {
        var r = RASHI_METAL_MAP[key];
        var displayName = getRashiName(key);
        var card = document.createElement('button');
        card.type = 'button';
        card.className = 'rashi-card';
        card.setAttribute('data-rashi', key);
        var iconHtml = RASHI_IMAGES[key]
          ? '<img src="' + RASHI_IMAGES[key] + '" alt="" class="rashi-icon-img" loading="lazy">'
          : '<span class="rashi-icon" aria-hidden="true">' + (RASHI_SVGS[key] || '') + '</span>';
        card.innerHTML = iconHtml + '<span class="rashi-name">' + getRashiName(key) + '</span>';
        card.addEventListener('click', function () {
          selectedRashi = key;
          emit('rashi_selected', { rashi: key, metal: r.metal });
          emit('cta_click', { cta_location: 'rashi_select', cta_label: displayName, step_index: 2 });
          showStep(3);
        });
        grid.appendChild(card);
      });

      // CTAs
      document.getElementById('cta-start').addEventListener('click', function () {
        emit('cta_click', { cta_location: 'hook', cta_label: 'Start Now', step_index: 1 });
        showStep(2);
      });
      var kundliLoader = document.getElementById('kundliLoader');
      var kundliLoaderLine = document.getElementById('kundliLoaderLine');
      var loaderLines = [
        'Graho ki position analyse ho rahi hai…',
        'Janam lagna aur dashao ka pattern check ho raha hai…',
        'Career aur paison par grah ka asar scan ho raha hai…',
        'Nakshatra aur rashi ki detail nikal rahi hai…',
        'Dosha aur yog ka analysis ho raha hai…',
        'Report taiyar ho rahi hai…'
      ];
      var LOADER_DURATION_MS = 5000;

      function showKundliLoaderAndGo() {
        if (!kundliLoader || !kundliLoaderLine) {
          goToPreview();
          return;
        }
        kundliLoader.classList.add('visible');
        kundliLoader.style.display = 'flex';
        kundliLoader.setAttribute('aria-hidden', 'false');
        kundliLoaderLine.textContent = loaderLines[0];

        var idx = 0;
        var interval = setInterval(function () {
          idx = (idx + 1) % loaderLines.length;
          kundliLoaderLine.textContent = loaderLines[idx];
        }, 850);

        function done() {
          clearInterval(interval);
          goToPreview();
        }

        requestAnimationFrame(function () {
          requestAnimationFrame(function () {
            setTimeout(done, LOADER_DURATION_MS);
          });
        });
      }

      document.getElementById('cta-check-kundli').addEventListener('click', function () {
        emit('cta_click', { cta_location: 'result', cta_label: 'Check My Personalized Kundli', step_index: 3 });
        showKundliLoaderAndGo();
      });
      document.getElementById('cta-whatsapp-result').addEventListener('click', function () {
        document.getElementById('whatsappPhoneInput').value = '';
        document.getElementById('whatsappPhoneErr').style.display = 'none';
        document.getElementById('whatsappPhoneModal').classList.add('visible');
      });
      document.getElementById('whatsappModalClose').addEventListener('click', function () {
        document.getElementById('whatsappPhoneModal').classList.remove('visible');
      });
      document.getElementById('whatsappPhoneModal').addEventListener('click', function (e) {
        if (e.target === this) this.classList.remove('visible');
      });
      document.getElementById('whatsappModalSubmit').addEventListener('click', function () {
        var inp = document.getElementById('whatsappPhoneInput');
        var errEl = document.getElementById('whatsappPhoneErr');
        var phone = (inp.value || '').replace(/\D/g, '');
        if (phone.length !== 10) {
          errEl.textContent = 'Sahi 10 digit number enter karein';
          errEl.style.display = 'block';
          return;
        }
        var rashi = selectedRashi || '';
        var metal = (selectedRashi && RASHI_METAL_MAP[selectedRashi]) ? RASHI_METAL_MAP[selectedRashi].metal : '';
        var rashiName = rashi ? getRashiName(rashi) : '';
        emit('whatsapp_click', { phone: phone, rashi: rashi, metal: metal, rashi_display: rashiName, lead: true });
        errEl.style.display = 'none';
        document.getElementById('whatsappPhoneModal').classList.remove('visible');
        window.location.href = 'https://whatsapp.com/channel/0029VbCI7Yu5Ui2VV24kwC42';
      });
      document.getElementById('cta-back-rashi').addEventListener('click', function () {
        showStep(2);
      });
      document.querySelectorAll('.accordion-trigger').forEach(function (btn) {
        btn.addEventListener('click', function () {
          var id = this.getAttribute('data-accordion');
          var panel = document.getElementById('accordion' + id);
          var open = this.getAttribute('aria-expanded') === 'true';
          this.setAttribute('aria-expanded', !open);
          if (panel) panel.classList.toggle('open', !open);
        });
      });
      document.getElementById('cta-proceed').addEventListener('click', function () {
        emit('cta_click', { cta_location: 'education', cta_label: 'Show My Report', step_index: 4 });
        showStep(5);
      });
      document.getElementById('cta-pay').addEventListener('click', goCheckout);
      document.getElementById('cta-sticky').addEventListener('click', function () {
        emit('cta_click', { cta_location: 'sticky_result', cta_label: 'Check My Personalized Kundli', step_index: 3 });
        showKundliLoaderAndGo();
      });

      // Step 1 already visible for fast LCP; init state
      currentStep = 1;
    })();
  </script>
</body>

</html>